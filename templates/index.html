<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>SnapRank - Make Tiers with Friends: {{ code }}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 p-6 text-white">
  <h1 class="text-3xl font-bold text-center mb-4">Room {{ code }}</h1>
  <h4 class="text-xl  text-center mb-4">Upload photos and rank items with your friends</h4>

  <!-- Upload form -->
  <form action="/room/{{ code }}/upload" method="POST" enctype="multipart/form-data" class="flex justify-center gap-4 mb-6">
    <input type="file" name="image" multiple required class="border p-2 text-black bg-white rounded">
    <button class="bg-blue-500 text-white px-4 py-2 rounded">Upload Images</button>
  </form>

  <!-- Image Bucket -->
  <div class="mb-8">
    <h2 class="text-xl font-bold mb-2">ðŸª£ Image Bucket</h2>
    <div id="BUCKET" class="flex gap-2 flex-wrap bg-gray-700 p-4 rounded shadow min-h-[100px]" ondrop="drop(event, 'BUCKET')" ondragover="allowDrop(event)">
      {% for img in tiers['BUCKET'] %}
        <img src="{{ url_for('static', filename='uploads/' ~ code ~ '/' ~ img) }}" 
             draggable="true"
             data-img="{{ img }}"
             ondragstart="drag(event)"
             class="w-24 h-24 object-cover border rounded">
      {% endfor %}
    </div>
  </div>

  <!-- Tiers -->
  <div class="flex flex-col gap-2">
    {% for tier, color in [('S', 'bg-red-400'), ('A', 'bg-orange-300'), ('B', 'bg-yellow-300'), ('C', 'bg-yellow-200'), ('D', 'bg-lime-300')] %}
      <div class="flex h-24">
        <div class="{{ color }} w-20 flex items-center justify-center font-bold text-black border border-black">{{ tier }}</div>
        <div ondrop="drop(event, '{{ tier }}')" ondragover="allowDrop(event)" class="flex-1 bg-gray-800 p-2 flex flex-wrap gap-2 border border-black min-h-full">
          <div id="{{ tier }}" class="flex flex-wrap gap-2">
            {% for img in tiers[tier] %}
              <img src="{{ url_for('static', filename='uploads/' ~ code ~ '/' ~ img) }}"
                   draggable="true"
                   data-img="{{ img }}"
                   ondragstart="drag(event)"
                   class="w-24 h-24 object-cover border rounded">
            {% endfor %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- JavaScript -->
  <script>
    const roomCode = "{{ code }}";
  </script>
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
